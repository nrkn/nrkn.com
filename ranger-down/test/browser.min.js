let s=()=>{let e=e=>new Promise(t=>{let s=new Image;s.onload=(()=>t(s)),s.src=e}),t=e=>e[s(e.length)],s=(e,t=0)=>~~(Math.random()*e)+t,o=e=>e.slice().sort(()=>s(3)-1),n=(e,t)=>Math.max(e,t)-Math.min(e,t),h=([e,t])=>[[e-1,t],[e+1,t],[e,t-1],[e,t+1]],r=([e,t])=>[[e-1,t],[e+1,t],[e,t-1],[e,t+1],[e-1,t-1],[e+1,t-1],[e-1,t+1],[e+1,t+1]],l=(e,t,s)=>h(t).filter(t=>e[t[1]][t[0]]===s),a=([e,t],[s,o])=>Math.hypot(n(e,s),n(t,o)),u=(e,t)=>{let s,o=25600;for(let n=0;n<t.length;n++){let h=a(e,t[n]);h<o&&(o=h,s=t[n])}return s},g=([e,t],s)=>{let o=[],n=[[e,t,0]],r=[],l=([e,t,l])=>{m([e,t])&&s([e,t])&&(r[160*t+e]||(o.push([e,t,l]),r[160*t+e]=1,n.push(...h([e,t]).map(([e,t])=>[e,t,l+1]))))};for(;n.length;)l(n.shift());return o},p=([e,t],[s,o])=>{let h=n(e,s),r=n(t,o),l=e,a=t;return h>r&&(s>e&&(l=e+1),e>s&&(l=e-1)),r>h&&(o>t&&(a=t+1),t>o&&(a=t-1)),[l,a]},i=([e,s],[o,n],r=m,l=.66)=>{let a=[],c=[],u=([e,s])=>{c[160*s+e]||(a.push([e,s]),c[160*s+e]=1),e===o&&s===n||u(Math.random()<l?t(h([e,s]).filter(r))||[e,s]:p([e,s],[o,n]))};return u([e,s]),a},d=e=>[3===e?20:1===e?140:s(120,20),0===e?20:2===e?140:s(120,20)],f=()=>[s(120,20),s(120,20)],S=(e,[t,s])=>{for(let o=0;o<e.length;o++)if(e[o][0]===t&&e[o][1]===s)return!0;return!1},m=([e,t])=>e>=0&&e<=159&&t>=0&&t<=159,E=([e,t])=>e>=8&&e<=152&&t>=8&&t<=152,N=()=>{let e=[];for(let t=0;t<160;t++){let t=[];for(let e=0;e<160;e++)t.push(1);e.push(t)}return e},R=(e,t,s)=>{for(let o=0;o<t.length;o++){let[n,h]=t[o];e[h][n]=s([n,h])}},I=(e,n,c)=>{let p=N(),S=s(10,40),m=[d(0),d(1),d(2),d(3)];for(;m.length<S;){let e=f(),t=u(e,m);a(e,t)>10&&m.push(e)}let I=[],O=m.slice();let T=O.pop();let y=T;for(;O.length;){let e=u(T,O),t=i(T,e,E,.33);I.push(...t),T=O.pop()}let C=i(T,y,E,.33);I.push(...C);for(let e=0;e<10;e++){let e=i(t(m),t(m),E,.33);I.push(...e)}let w=[];for(let e=0;e<m.length;e++)w.push(...r(m[e]));let k=((e,s=8448)=>{let o=e.slice(),n=[];for(let e=0;e<o.length;e++){let[t,s]=o[e];n[160*s+t]=1}for(;o.length<s;){let[e,s]=t(o),r=h([e,s]);if(r.length){let[e,s]=t(r);n[160*s+e]||(o.push([e,s]),n[160*s+e]=1)}}return o})((e=>{let t=[],s=[];for(let o=0;o<e.length;o++){let[n,h]=e[o];s[160*h+n]||(t.push(e[o]),s[160*h+n]=1)}return t})([...m,...w,...I])),[A,M]=(e=>{let t=160,s=[0,0];for(let o=0;o<e.length;o++){let[n,h]=e[o];n<t&&(t=n,s=[n,h])}return s})(k);R(p,k,()=>2);let v=g([0,0],([e,t])=>1===p[t][e]);R(p,v,()=>0);let F=((e,t)=>t.slice().sort((t,s)=>a(e,t)-a(e,s)))([A,M],m),Y=i([A,M],F[0],E,.33);I.push(...Y),(e=>{let t=0;let n=o([0,3,6,9]);for(let o=0;o<160;o++)for(let h=0;h<160;h++)if(1===e[o][h]){let r=g([h,o],([t,s])=>1===e[s][t]);let l=0;r.length>5&&(l=t<4?n[t]:s(10),t++),R(e,r,l<3?()=>s(9)+2:l<6?()=>s(3)?s(4)+11:s(9)+2:l<9?()=>s(4)?s(3)+31:s(9)+2:()=>0)}})(p),(e=>{for(let t=0;t<160;t++)for(let o=0;o<160;o++)2===e[t][o]&&(l(e,[o,t],0).length?e[t][o]=s(3)+17:e[t][o]=s(13)+2)})(p),R(p,I,([e,t])=>p[t][e]>=17&&p[t][e]<20?p[t][e]:2),R(p,w,([e,t])=>p[t][e]>=17&&p[t][e]<20?p[t][e]:s(9)+2);let G=F.length-4,L=~~(.35*G),$=~~(.15*G),b=G-L-$,D=[];for(let e=0;e<L;e++)D.push(1);for(let e=0;e<$;e++)D.push(3);for(let e=0;e<b;e++)D.push(2);let P=[0,1,2,...o(D),4];for(let t=0;t<F.length;t++){let[o,h]=F[t],r=P[t];0===r?p[h][o]=38:1===r?(p[h][o]=20,e[160*h+o]=[0,0,0],e[0].push([o,h])):2===r?(p[h][o]=s(3)+28,n[160*h+o]=[],n[0].push([o,h])):3===r?(p[h][o]=36,c[0].push([o,h])):4===r&&(p[h][o]=34)}return[3,A,M,p,0,A,M]},O=e=>e<2||e>=11&&e<15||20===e||27===e||24===e||25===e||26===e||21===e||22===e||23===e||e>=28&&e<31||e>=31&&e<34||36===e||44===e||43===e||34===e,T=[];T[0]=[0,"s.png"],T[1]=[1,["Lost contact with","RANGER. Take boat","and investigate."]],T[2]=[1,["Sunrise"]],T[3]=[1,["Sunset"]],T[8]=[1,["I should","investigate"]],T[9]=[2,["Sleep?",""],[["Yes",11],["No",-1]],0,"g"],T[10]=[1,["I'm not tired!"]],T[11]=[4,0],T[12]=[1,["I'm hungry!"]],T[13]=[1,["You died","","GAME OVER!"]],T[14]=[1,["It's RANGER!","","RANGER is DEAD!","","Found 1 keycard","Found 5 food","Found 3 chips","Found 2 backups"]],T[15]=[1,["It's locked!"]],T[16]=[2,["It's locked!","","Use keycard?",""],[["Yes",17],["No",-1]],0,"g"],T[17]=[4,1],T[18]=[2,["Search ruins?","","1 hour",""],[["Yes",19],["No",-1]],0,"g"],T[19]=[4,2],T[21]=[4,3],T[23]=[4,4],T[26]=[4,5],T[27]=[4,6],T[28]=[4,7],T[29]=[4,8],T[30]=[4,9],T[31]=[4,10],T[33]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 1","","RANGER:","Sent to investigate","ruins. Found strange","technology"],[],0,"a"],T[34]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 2","","RANGER:","Was testing strange","technology. Portals","appeared!"],[],0,"a"],T[35]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 3","","RANGER:","Monsters coming out","of portals! Made it","back to hut. They","only come out at","night"],[],0,"a"],T[36]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 4","","RANGER:","Monsters affecting","computers. Have been","stashing items in","ruins for emergency.","Tried comms but the","satellite is offline"],[],0,"a"],T[37]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 5","","RANGER:","Programmed synth to","make mod chips that","can shut down portal","but computer went","offline! There are","more of them every","night"],[],0,"a"],T[38]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 6","","RANGER:","Got computer online.","Still has errors.","Comms are badly","damaged"],[],0,"a"],T[39]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 7","","RANGER:","Rigged comms to send","distress signal but","satellite offline.","Synth can make chip","to fix it"],[],0,"a"],T[40]=[2,["RSOS v3.27","--------------------","NOTES ENTRY 8","","RANGER:","Must disable portals","before send distress","signal, no way to","warn rescue team","about monsters","with comms offline"],[],0,"a"],T[41]=[4,11],T[42]=[4,12],T[43]=[4,13],T[44]=[4,14],T[45]=[4,15];let y=e=>{let t=P[0]()[6],s=P[0]()[7];c.className=t,c.width=c.height=160,3===s[0]&&(M(e),v()),0===s[0]&&"s.png"===s[1]&&Y.drawImage(b,0,0),1===s[0]&&k(s[1]),2===s[0]&&A(s),5===s[0]&&F(),requestAnimationFrame(y)},C=(e="",t=0,s=0)=>Y.drawImage(G,8*(e.charCodeAt(0)-32),0,8,8,8*t,8*s,8,8),w=(e="",t=0,s=0)=>{for(let o=0;o<e.length;o++)C(e[o],t+o,s)},k=e=>{let t=~~((20-e.length)/2);for(let s=0;s<e.length;s++){let o=~~((20-e[s].length)/2);w(e[s],o,t+s)}},A=e=>{for(let t=0;t<e[1].length;t++)w(e[1][t],0,t);w("<X>",17,0);let t=e[1].length%2?1:0;for(let s=0;s<e[2].length;s++)w(`${s+1} ${s===e[3]?"<":" "}${e[2][s][0]}${s===e[3]?">":" "}`,0,2*s+e[1].length+t)},M=e=>{let t=~~(e/500)%2?0:1,s=P[0]()[8],o=P[0]()[7],n=o[3],h=o[1],r=o[2],l=o[4],a=o[5],c=o[6],u=P[0]()[2],g=P[0]()[0],p=P[0]()[16],i=P[0]()[12],d=P[0]()[4]>=18||P[0]()[4]<6;for(let e=0;e<9;e++)for(let o=0;o<9;o++){let f=h-4+o,S=r-4+e;let E=16*t;if(m([f,S])){let e=n[S][f];e&&(E=16*e)}if(Y.drawImage(L,E,0,16,16,16*(o+1),16*(e+1),16,16),36===n[S][f]&&(d?Y.drawImage(L,16*(36+t),0,16,16,16*(o+1),16*(e+1),16,16):Y.drawImage(L,704,0,16,16,16*(o+1),16*(e+1),16,16)),34===n[S][f]&&p&&Y.drawImage(L,16*(34+t),0,16,16,16*(o+1),16*(e+1),16,16),0===l&&d)for(let n=0;n<s.length;n++){let h=s[n],r=h[0],l=h[1],a=h[2];r===f&&l===S&&h[3]>0&&(E=16*(7+t)+16*a*2,Y.drawImage($,E,0,16,16,16*(o+1),16*(e+1),16,16))}4===o&&4===e&&(E=u?16*t+16*g*2:64,Y.drawImage($,E,0,16,16,16*(o+1),16*(e+1),16,16)),0===l&&f===a-2&&S===c&&Y.drawImage($,80,0,16,16,16*(o+1),16*(e+1),16,16),0===l&&f===a-1&&S===c&&Y.drawImage($,96,0,16,16,16*(o+1),16*(e+1),16,16),0!==l||i[160*S+f]||Y.drawImage(L,672,0,16,16,16*(o+1),16*(e+1),16,16)}},v=()=>{let e=P[0]()[1],t=P[0]()[2],s=P[0]()[9],o=P[0]()[10],n=P[0]()[11],h=P[0]()[17],r=P[0]()[18];w(`RANGER DOWN ${P[2]()}`,2.5,.5),Y.drawImage(L,256,0,16,16,0,0,16,16),w(`${t}`,t<10?.5:0,2),Y.drawImage(L,240,0,16,16,0,24,16,16),w(`${e}`,e<10?.5:0,5),Y.drawImage(L,624,0,16,16,0,48,16,16),w(`${s}`,s<10?.5:0,8),Y.drawImage(L,640,0,16,16,0,72,16,16),w(`${n}`,n<10?.5:0,11),Y.drawImage(L,656,0,16,16,0,96,16,16),w(`${o}`,o<10?.5:0,14),h>-1&&w(`${h}`,h<10?.5:0,15),r>-1&&w(`${r}`,r<10?.5:0,16)},F=()=>{let e=P[0]()[7],t=P[0]()[12],s=P[0]()[13],o=P[0]()[14],n=(P[0]()[15],P[0]()[16]),h=e[1],r=e[2],l=e[3],a=e[4];for(let e=0;e<160;e++)for(let s=0;s<160;s++){let o=~~(s/40),n=~~(e/40),h=l[e][s],r=h>=17&&h<20;a[4*n+o]?0===h||!t[160*e+s]&&!r?Y.drawImage(L,432,0,1,1,s,e,1,1):Y.drawImage(L,32,0,1,1,s,e,1,1):s>8&&e>8&&(s%2&&!(e%2)||!(s%2)&&e%2)&&Y.drawImage(L,32,0,1,1,s,e,1,1)}for(let e=0;e<160;e++)for(let t=0;t<160;t++){let h=~~(t/40),r=~~(e/40),c=l[e][t];if(a[4*r+h]){if(20===c){s[160*e+t][0]?Y.drawImage(D,35,0,7,7,t-3,e-3,7,7):Y.drawImage(D,0,0,7,7,t-3,e-3,7,7)}if(c>=28&&c<31){o[160*e+t].length?Y.drawImage(D,7,0,7,7,t-3,e-3,7,7):Y.drawImage(D,42,0,7,7,t-3,e-3,7,7)}34===c&&(n?Y.drawImage(D,49,0,7,7,t-3,e-3,7,7):Y.drawImage(D,14,0,7,7,t-3,e-3,7,7)),36===c&&Y.drawImage(D,28,0,7,7,t-3,e-3,7,7),43===c&&Y.drawImage(D,56,0,7,7,t-3,e-3,7,7)}}Y.drawImage(D,21,0,7,7,h-3,r-3,7,7);for(let e=0;e<40;e++)Y.drawImage(G,8*(16+e),0,8,8,0,40*e+20,8,8);for(let e=0;e<40;e++)Y.drawImage(G,8*(33+e),0,8,8,40*e+20,0,8,8)},Y=c.getContext("2d");let G,L,$,b,D,P=(()=>{let e,n,h,l,c,u,i,d,f,E,y,C,w,k,A,M,v,F,Y,G,L,$,b,D;let P=()=>{e=[[]],n=[[]],D=[[]],h=0,l=5,c=20,u=20,i=0,d=0,f=0,E=17,y=55,T[7]=I(e,n,D),w=[T[7],T[1],T[0]],C="",k=[],v=0,$=-1,b=-1,G=[33],L=[],A=[],M=0;let t=T[7],s=t[1],o=t[2];L[4*~~(o/40)+~~(s/40)]=1,U(),K(),Z(t)},H=()=>{w.pop(),w.length||P()},B=([e,t])=>{let o=s(2),n=s(2)+1,h=T[7],r=h[3][t][e],l=h[1],a=h[2];O(r)||S(k,[e,t])||l===e&&a===t||k.push([e,t,o,n])},U=()=>{for(;k.length<8;){let e=s(160),t=s(160);B([e,t])}},x=([e,t])=>{for(let s=0;s<k.length;s++){let o=k[s],n=o[0],h=o[1];if(o[3]>0&&e===n&&t===h)return 1}},K=()=>{let s=e[0].length,h=~~(2*s),r=~~(9*s),l=~~(2*s);let a=[];for(let e=0;e<h;e++)a.push(0);for(let e=0;e<r;e++)a.push(1);for(let e=0;e<50;e++)a.push(2);for(let e=0;e<l;e++)a.push(3);for(a=o(a);a.length;){let e=a.pop(),[s,o]=t(n[0]);n[160*o+s].push(e)}},W=(t=0)=>{if(c<1)w=[T[13]];else{if(60==++y&&(y=0,E++,t?(c<u&&c++,6===E&&(C="")):(6===E&&(C="",w.push(T[2])),18===E&&(C="i",w.push(T[3])),l>0?(l--,c<u&&c++):(c--,w.push(T[12])))),24===E){let t=e[0];for(let s=0;s<t.length;s++){let[o,n]=t[s];e[160*n+o][2]=0}E=0;let o=T[7];for(let e=0;e<160;e++)for(let t=0;t<160;t++)if(36===o[3][e][t]){let o=r([t,e]);for(let e=0;e<o.length;e++)s(3)||B(o[e])}}(()=>{for(let e=0;e<k.length;e++){let t=k[e],o=t[0],n=t[1],h=w[w.length-1],r=T[7],l=r[1],a=r[2],u=[o,n];if((E>=18||E<6)&&Math.random()<.66){let e=p([o,n],[l,a]);u[0]=e[0],u[1]=e[1]}else s(2)?u[0]=o+(s(3)-1):u[1]=n+(s(3)-1);let g=r[3][u[1]][u[0]];O(g)||x([u[0],u[1]])||l===u[0]&&a===u[1]||(t[0]=u[0],t[1]=u[1],u[0]<o&&(t[2]=1),u[0]>o&&(t[2]=0)),3===h[0]&&0===h[4]&&(E>=18||E<6)&&l===u[0]&&a===u[1]&&s(2)&&c>0&&t[3]>0&&c--}})()}},Z=e=>{if(0===e[4]){let t=e[1],s=e[2];for(let e=-4;e<4;e++)for(let o=-4;o<4;o++){let n=t+o,h=s+e;a([t,s],[n,h])<4&&(A[160*h+n]=1)}}},X=[()=>{for(;6!==E;)W(1)},()=>{F[0]=1,i--},()=>{let e=T[7],t=e[1],o=e[2],n=r([t,o]);let h=0;for(let e=0;e<60;e++){W();for(let t=0;t<n.length;t++){let[s,o]=n[t];x([s,o])&&(h=1,e=60)}}if(h)w.push([1,["Under attack!"]]);else{let e=Y.pop();if(3===e){let e=s(3)+2;w.push([1,[`Found ${e} food`]]),l+=e}else 0===e?(w.push([1,["Found keycard"]]),i++):1===e?(w.push([1,["Found chip"]]),d++):2===e&&(w.push([1,["Found backup"]]),f++)}},()=>{F[1]?w.push([2,["RSOS v3.27","--------------------",""],[["SYNTHESIZE",27],["DIAGNOSTICS",42],["NOTES",28],["COMMS",29],["MAP",31]],0,"a"]):w.push([2,["RSOS v3.27","--------------------","NETWORK OFFLINE","","EMERGENCY MODE",""],[["SYNTHESIZE",27],["DIAGNOSTICS",42]],0,"a"])},()=>{w.push([1,["Fixed 6 chips"]]),d-=6,F[1]=1},()=>{let e=s(3)+6;F[2]=1,l+=e,w.push([1,[`Synthesized ${e} food`]])},()=>{let e=[],t=[2,["RSOS v3.27","--------------------","SYNTHESIZER"],e,0,"a"];F[2]?t[1].push("  CHARGING..."):(e.push(["RATIONS",26]),$>-1&&e.push(["MOD CHIPS",43]),b>-1&&e.push(["SATELLITE CHIP",44])),w.push(t)},()=>{let e=[2,["RSOS v3.27","--------------------","NOTES"],G.map(e=>[`ENTRY ${e}`,e]),0,"a"];w.push(e)},()=>{let e=[],t=[2,["RSOS v3.27","--------------------","COMMS"],e,0,"a"];M?e.push(["DISTRESS SIGNAL",45]):t[1].push("  SATELLITE OFFLINE"),w.push(t)},()=>{},()=>{let e=T[7],t=[5,e[1],e[2],e[3],L];w.push(t)},()=>{f--;let e=G.length+33,o=s(8);if(G.length+33>37&&-1===$)w.push([1,["Recovered 1 synth","database entry"]]),$=0;else if(G.length+33>39&&-1===b)w.push([1,["Recovered 1 synth","database entry"]]),b=0;else if(o<3&&e<41)G.push(e),w.push(T[G.length+33-1]),w.push([1,["Recovered 1 note","database entry"]]);else{let s=[];for(let e=0;e<4;e++)for(let t=0;t<4;t++)L[4*e+t]||s.push([t,e]);if(s.length){let[e,o]=t(s);L[4*o+e]=1,X[10](),w.push([1,["Recovered 1 map","database entry"]])}else e<41?(G.push(e),w.push(T[G.length+33-1]),w.push([1,["Recovered 1 note","database entry"]])):w.push([1,["Disk corrupt"]])}},()=>{if(F[1]){let e=[];for(let t=0;t<4;t++)for(let s=0;s<4;s++)L[4*t+s]||e.push([s,t]);let t=["RSOS v3.27","--------------------","DIAGNOSTICS","","NETWORK ONLINE","SYNTHESIZE ONLINE"];-1===b&&t.push("  RESTORE BACKUPS"),t.push("NOTES ONLINE"),G.length<8&&t.push("  RESTORE BACKUPS"),M?(t.push("COMMS ONLINE"),t.push("  DISTRESS MODE ONLY")):t.push("COMMS OFFLINE"),t.push("MAP ONLINE"),e.length&&t.push("  RESTORE BACKUPS"),w.push([2,t,[],0,"a"])}else w.push([2,["RSOS v3.27","--------------------","DIAGNOSTICS","","NETWORK OFFLINE","  FIX 6 CHIPS","SYNTHESIZE ONLINE","  EMERGENCY MODE","NOTES OFFLINE","COMMS OFFLINE","MAP OFFLINE"],[],0,"a"])},()=>{let e=s(2)+2;F[2]=1,$+=e,w.push([1,[`Synthesized ${e}`,"mod chips"]])},()=>{F[2]=1,b++,w.push([1,["Synthesized","satellite chip"]])},()=>{let e=D[0],t=T[7][3];let s=0;for(let o=0;o<e.length;o++){let[n,h]=e[o];43!==t[h][n]&&(s=1)}w=s?[[1,["You send the","distress signal.","","As the rescue team","arrives monsters","pour out of","remaining portals","and kill them all!","","GAME OVER!"]]]:[[1,["You send the","distress signal.","","The rescue team","arrives and you","help them kill","the remaining","monsters.","","YOU WIN!"]]]}];return P(),[()=>[h,l,c,u,E,y,(()=>0===w[w.length-1][0]?"g":1===w[w.length-1][0]?"g":5===w[w.length-1][0]?"a":2===w[w.length-1][0]?w[w.length-1][4]:C)(),w[w.length-1],k,i,d,f,A,e,n,D,M,$,b],P,()=>`${E<10?"0":""}${E}:${y<10?"0":""}${y}`,W,(t,o)=>{let r=w[w.length-1];if(3!==r[0])return;let a;if(W(),-1===t&&(h=1),1===t&&(h=0),t=r[1]+t,o=r[2]+o,(E>=18||E<6)&&0===r[4])for(let e=0;e<k.length;e++)k[e][0]===t&&k[e][1]===o&&k[e][3]>0&&(a=k[e]);if(c>0&&m([t,o])&&!O(r[3][o][t])&&!a&&(r[1]=t,r[2]=o),Z(r),0===r[4]&&(20===r[3][o][t]&&((F=e[160*o+t])[0]?w.push((()=>{let e=N(),t=g([0,0],([t,s])=>1===e[s][t]);return R(e,t,()=>27),e[19][18]=21,e[19][19]=22,e[19][20]=23,e[20][18]=2,e[20][19]=2,e[20][20]=2,e[21][18]=24,e[21][19]=25,e[21][20]=26,[3,20,20,e,1,20,20]})()):i?w.push(T[16]):w.push(T[15])),o===r[6]&&t===r[5]-1&&w.push(T[8]),a&&s(2)&&a[3]--,38!==r[3][o][t]||v||(v=1,w.push(T[14]),i++,l+=5,d+=3,f+=2),r[3][o][t]>=28&&r[3][o][t]<31&&((Y=n[160*o+t]).length?w.push(T[18]):w.push([1,["Nothing here"]])),36===r[3][o][t]&&($>0?(w.push([1,["Portal disabled!"]]),r[3][o][t]=43,D[160*o+t]=1,$--):$>-1?w.push([1,["Need mod chips"]]):w.push([1,["A strange portal"]])),34===r[3][o][t]&&(b>0&&!M?(w.push([1,["Fixed satellite!"]]),M=1,b--):b>-1&&!M?w.push([1,["Need satellite chip"]]):M||w.push([1,["Satellite is offline"]]))),1===r[4]){if(26===r[3][o][t]&&w.pop(),21===r[3][o][t]){let e=[["Use",21]],t=[2,["A computer",""],e,0,"g"];!F[1]&&d>5&&e.push(["Fix Chips",23]),F[1]&&f>0&&e.push(["Restore Backups",41]),e.length>1?w.push(t):X[3]()}23===r[3][o][t]&&(E>=17||E<6?w.push(T[9]):w.push(T[10]))}},H,e=>{2===w[w.length-1][0]&&(w[w.length-1][3]=e)},()=>{if(2===w[w.length-1][0]){let e=w[w.length-1];if(!e[2].length)return void w.pop();let t=e[3],s=e[2][t][1];-1===s?H():4===T[s][0]?(w.pop(),X[T[s][1]]()):w.push(T[s])}}]})();document.onkeyup=(e=>{let t=P[0]()[7];if(3===t[0]&&(e=>{65!==e.keyCode&&37!==e.keyCode||P[4](-1,0),68!==e.keyCode&&39!==e.keyCode||P[4](1,0),87!==e.keyCode&&38!==e.keyCode||P[4](0,-1),83!==e.keyCode&&40!==e.keyCode||P[4](0,1)})(e),0!==t[0]&&1!==t[0]&&5!==t[0]||32!==e.keyCode&&27!==e.keyCode&&13!==e.keyCode||P[5](),2===t[0]){let s=t;27===e.keyCode&&P[5](),87!==e.keyCode&&38!==e.keyCode||s[3]>0&&P[6](s[3]-1),83!==e.keyCode&&40!==e.keyCode||s[3]<s[2].length-1&&P[6](s[3]+1),32!==e.keyCode&&13!==e.keyCode||P[7]()}});let H=([e,t])=>{let s=P[0]()[7],o=c.getBoundingClientRect().width/10,h=~~((e-c.getBoundingClientRect().left)/o)-1,r=~~((t-c.getBoundingClientRect().top)/o)-1;if(3===s[0]){if(4===h&&4===r)return;if(h<0||r<0)return;let e=n(h,4),t=n(r,4);let s=0,o=0;e>t?s=h>4?1:-1:e<t&&(o=r>4?1:-1),P[4](s,o)}if(0!==s[0]&&1!==s[0]&&5!==s[0]||P[5](),2===s[0]){r<0&&P[5]();let e=s,t=e[1].length%2?1:0,o=(e[1].length+t)/2,n=e[2].length,h=r-o+1;h>=0&&h<n&&(h===e[3]?P[7]():P[6](h))}};c.ontouchend=(e=>{e.preventDefault();for(let t=0;t<e.changedTouches.length;t++)H([e.changedTouches[t].clientX,e.changedTouches[t].clientY])}),c.onclick=(e=>{e.preventDefault(),H([e.clientX,e.clientY])}),((...t)=>Promise.all(t.map(e)))("f.gif","t.gif","p.gif","s.png","c.gif").then(e=>{[G,L,$,b,D]=e,requestAnimationFrame(y)})};s();